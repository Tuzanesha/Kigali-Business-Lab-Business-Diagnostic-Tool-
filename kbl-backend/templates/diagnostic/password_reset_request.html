<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Forgot password</title>
  <style>body{font-family:sans-serif;max-width:720px;margin:2rem auto}</style>
  <script>
    async function requestReset(evt){
      evt.preventDefault();
      const email = document.getElementById('email').value.trim();
      const res = await fetch('/api/auth/password-reset/request/',{
        method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({email})
      });
      const data = await res.json().catch(()=>({}));
      if(res.ok){
        alert(data.detail || 'Password reset link sent to your email.');
      } else if(res.status === 404){
        alert(data.detail || "You don't have an account yet. Please sign up first.");
        document.getElementById('signup').style.display='inline';
      } else {
        alert(data.detail || 'Unable to process request right now.');
      }
    }
  </script>
</head>
<body>
  <h1>Forgot your password?</h1>
  <p>Enter your account email. If it exists, we'll email you a secure link to set a new password.</p>
  <form onsubmit="requestReset(event)">
    <div><label>Email <input id="email" type="email" required /></label></div>
    <button type="submit">Send reset link</button>
  </form>
  <p>
    <a href="/api/web/login/">Back to login</a>
    <span> Â· </span>
    <a id="signup" href="/api/web/signup/" style="display:none">Create an account</a>
  </p>
</body>
</html>
